<div class="tcs-case-card-customization" fxLayout="column">
  <div class="tcs-case-card-customization-header" fxLayout="row" fxLayoutAlign="space-between stretch">
    <div fxLayoutAlign="start center">
      <mat-icon class="tcs-icon tcs-customization-icon" svgIcon="tcs-customization-icon"></mat-icon>
      <div class="tcs-case-card-customization-header-text">Configure Case Cards</div>
    </div>
  </div>
  <div class="tcs-case-card-customization-content" fxFlex>
    <div fxLayout="row" fxLayoutAlign="space-around stretch" fxFlex>
      <div fxLayout="column" fxLayoutAlign="center center" fxFlex>
        <div fxLayout="column" fxLayoutAlign="start center">
          <div class="tcs-case-card-customization-section-text">Preview</div>
        </div>
        <div class="tcs-case-card-customization-preview" fxLayout="column" fxLayoutAlign="center center" fxFlex>
          <div *ngIf="selectedStateConfig && caseTypeColor && caseTypeIcon" style="border-radius: 3px; background-color: #fbfbfb; padding: 25px;" fxLayout="column" fxLayoutAlign="space-around center">
            <tcla-live-apps-case-summary style="margin: 5px;" [displayType]="'card'" [typeBar]="true" [configMode]="true" [configModeColor]="selectedStateConfig.fill" [configModeIcon]="selectedStateConfig.icon" [configModeCaseTypeColor]="caseTypeColor" [configModeCaseTypeIcon]="caseTypeIcon" [configModeAppTypeLabel]="appTypeLabel"></tcla-live-apps-case-summary>
            <tcla-live-apps-case-summary style="margin: 5px;" [displayType]="'miniCard'" [typeBar]="true" [configMode]="true" [configModeColor]="selectedStateConfig.fill" [configModeIcon]="selectedStateConfig.icon" [configModeCaseTypeColor]="caseTypeColor" [configModeCaseTypeIcon]="caseTypeIcon" [configModeAppTypeLabel]="appTypeLabel"></tcla-live-apps-case-summary>
          </div>
        </div>
      </div>
      <div class="tcs-case-card-customization-divider"></div>
      <div fxLayout="column" fxLayoutAlign="center center" fxFlex>
        <div fxLayout="column" fxLayoutAlign="start center">
          <div class="tcs-case-card-customization-section-text">Configure Icons</div>
        </div>
        <div fxFlex>
          <div fxFlex class="tcs-case-states-list" *ngIf="caseCardConfig.cardConfig && caseCardConfig.states" fxLayout="column" fxLayoutAlign="center center">
            <div class="tcs-case-states-list-inner">
              <!-- case type icon -->
              <div class="tcs-case-states-list-row">
                <div *ngIf="getConfigForCaseType(appTypeLabel); let stateConfig;">
                  <div fxLayout="row" fxLayoutAlign="space-between center">
                    <div fxLayoutAlign="start center" style="min-width: 170px;">Case Type Icon</div>
                    <tcla-live-apps-state-icon style="margin-left: 10px; margin-right: 10px; min-width: 14px;" #iconcomp [id]="appTypeLabel" [iconPath]="stateConfig.icon" [color]="stateConfig.fill"
                                              [(colorPicker)]="stateConfig.fill" (colorPickerChange)="setCaseTypeFill($event, stateConfig)" [cpPresetColors]="DEFAULT_COLOR_PALETTE" [cpPositionOffset]="'-40%'"
                                              matTooltip="Click to change color" matTooltipShowDelay="1000" matTooltipPosition="below">
                    </tcla-live-apps-state-icon>
                    <mat-icon (click)="openDialog(null, true)" class="tcs-icon tcs-icon-active tcs-config-button tcs-document-upload-button" svgIcon="tcs-document-upload"
                              matTooltip="Click to upload new icon" matTooltipShowDelay="1000" matTooltipPosition="below">
                    </mat-icon>
                    <mat-icon class="tcs-icon tcs-icon-active tcs-config-button-placeholder"></mat-icon>
                  </div>
                </div>
              </div>
              <div class="tcs-case-states-icon-divider"></div>
              <!-- case state icons -->
              <div *ngFor="let state of caseCardConfig.states" class="tcs-case-states-list-row" (click)="selectState(state)">
                <div *ngIf="getConfigForState(state); let stateConfig;">
                  <div fxLayout="row" fxLayoutAlign="space-between center">
                    <div fxLayoutAlign="start center" style="min-width: 170px;">{{state.label | ellipsis: 25}}</div>
                    <tcla-live-apps-state-icon style="margin-left: 10px; margin-right: 10px; min-width: 14px;" #iconcomp [id]="state.value" [iconPath]="stateConfig.icon" [color]="stateConfig.fill"
                                              [(colorPicker)]="stateConfig.fill" (colorPickerChange)="setFill($event, stateConfig)" [cpPresetColors]="DEFAULT_COLOR_PALETTE" [cpPositionOffset]="'-40%'"
                                              matTooltip="Click to change color" matTooltipShowDelay="1000" matTooltipPosition="below">
                    </tcla-live-apps-state-icon>
                    <mat-icon (click)="openDialog(state, false)" class="tcs-icon tcs-icon-active tcs-config-button tcs-document-upload-button" svgIcon="tcs-document-upload"
                              matTooltip="Click to upload new icon" matTooltipShowDelay="1000" matTooltipPosition="below">
                    </mat-icon>
                    <mat-icon class="tcs-icon tcs-icon-active tcs-config-button-placeholder"></mat-icon>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="tcs-case-card-customization-footer" fxLayout="column" fxLayoutAlign="end stretch">
    <div class="tcs-case-card-customization-action-buttons" fxLayout="row" fxLayoutAlign="center center">
      <button class="tcs-save-app-config-button" mat-button (click)="saveConfig()" type="submit">Save Configuration</button>
    </div>
  </div>
</div>
