<div fxLayout="column" class="case-view-top-level" fxFlex>
    <div>
        <tc-tibco-cloud-menu-bar [toolbarButtons]="toolbarButtons" [headerText]="title"
            (toolbarButtonEvent)="handleToolbarButtonEvent($event)">
            <div fxFlex fxLayout="row" fxLayoutAlign="space-between center">
                <div fxFlex="33" fxLayoutAlign="center none">
                    <tcla-live-apps-role-switcher *ngIf="displayRoles.length > 1" [roles]="displayRoles" [selectedRole]="currentRole" (changeRoleEvent)="roleChange($event)"></tcla-live-apps-role-switcher>
                </div>
                <div fxFlex="33">
                    <mat-button-toggle-group class="nav-switch-bar" name="view" aria-label="Font Style"
                        value="case-view" (change)="handleViewButtonEvent($event)">
                        <mat-button-toggle *ngFor="let view of viewButtons" [name]="view.tooltip" [value]="'case-view'" fxLayoutAlign="center center"
                            >{{view.tooltip}}</mat-button-toggle>
                    </mat-button-toggle-group>
                </div>
                <tcla-live-apps-application-create-button [sandboxId]="sandboxId" [appIds]="appIds"
                    (selection)="handleCreatorAppSelection($event)" fxFlex="33" fxLayoutAlign="end none">
                </tcla-live-apps-application-create-button>
            </div>
        </tc-tibco-cloud-menu-bar>
    </div>

    <div class="tcs-home-content" fxLayout="column" fxFlex="grow" fxLayoutAlign="start stretch"
        style="padding-left: 20px; padding-right: 20px; margin-top: 10px;">

        <div class="searchCasesWidget">
            <tcla-live-apps-search-widget [appIds]="appIds" [sandboxId]="sandboxId" [uiAppId]="uiAppId"
                (caseSelected)="clickCaseAction($event)"></tcla-live-apps-search-widget>
        </div>

        <div fxFlex fxLayout="row" fxLayoutGap="20px">
            <div fxFlex="70" fxLayout="column" fxLayoutGap="20px">
                <mat-tab-group fxFlex>
                    <mat-tab>
                        <ng-template mat-tab-label>
                            <mat-icon class="tcs-icon tcs-caselist-icon" svgIcon="tcs-recent-icon"></mat-icon>
                            <div style="margin-left: 10px;" class="tcs-case-list-header-text">Recents</div>
                        </ng-template>
                        <div class="recentCasesWidget" fxFill>
                            <tcla-live-apps-recent-cases class="padded-widget" [sandboxId]="sandboxId" [uiAppId]="uiAppId" [showHeader]="false"
                                (clickCase)="clickCaseAction($event)"></tcla-live-apps-recent-cases>
                        </div>
                    </mat-tab>
                    <mat-tab>
                        <ng-template mat-tab-label>
                            <mat-icon class="tcs-icon tcs-caselist-icon" svgIcon="tcs-favorites-icon"></mat-icon>
                            <div style="margin-left: 10px;" class="tcs-case-list-header-text">Favorites</div>
                        </ng-template>
                        <div class="favoriteCasesWidget" fxFill>
                            <tcla-live-apps-favorite-cases class="padded-widget" [sandboxId]="sandboxId" [uiAppId]="uiAppId" [showHeader]="false"
                                (clickCase)="clickCaseAction($event)"></tcla-live-apps-favorite-cases>
                        </div>
                    </mat-tab>
                </mat-tab-group>
            </div>

            <div fxFlex="30" fxLayout="column" fxLayoutGap="20px">
                <div fxFlex class="collaborationWidget">
                    <tcla-live-apps-notes [userId]="userId" [relatedItemId]="uiAppId" [relatedItemType]="'CASE_APP'">
                    </tcla-live-apps-notes>
                </div>
                
                <div fxFlex class="documentWidget">
                    <tcla-live-apps-documents [sandboxId]="sandboxId" [folderId]="uiAppId + '_Docs'" [folderType]="'orgFolders'"
                        [folderDescription]="'Document Library'"></tcla-live-apps-documents>
                </div>
            </div>
        </div>
    </div>
</div>